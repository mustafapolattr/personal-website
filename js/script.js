// Language dictionary for translations
const translations = {
    "en": {
        "title": "Personal Website",
        "nav-brand": "Hello There ðŸŒ",
        "nav-about": "About",
        "nav-game": "Reflex Game",
        "nav-contact": "Contact",
        "lang-text": "Language",
        "about-title": "About Me",
        "about-desc": "Technology is not just about writing code, itâ€™s about solving real-world problems and building a better future.",
        "about-text": "I am a problem solver, a builder, and a technology enthusiast who believes that software is not just about lines of code, but about shaping the way we interact with the world.",
        "resume-button": "Download My Resume",
        "contact-title": "Contact Me",
        "contact-name": "Your Name:",
        "contact-email": "Your Email:",
        "contact-message": "Your Message:",
        "contact-button": "Send",
        "contact-placeholder-name": "Enter your name",
        "contact-placeholder-email": "Enter your email",
        "contact-placeholder-message": "Write your message...",
        "form-success": "Message sent successfully!",
        "form-error": "Error sending message. Try again later.",
        "timeline-title-1": "2018 - Started Programming",
        "timeline-text-1": "Bachelor's Degree in Electronics and Communication Engineering and my first encounter with programming using C",
        "timeline-title-2": "2019 - 2020",
        "timeline-text-2": "In my undergraduate education, I took the subject of software to a higher level with Java and Python",
        "timeline-title-3": "2021",
        "timeline-text-3": "Introduction to embedded systems using Raspberry Pi and Python.",
        "timeline-title-4": "2021 - 2022",
        "timeline-text-4": "To delve deeper into software using C and Python in my internships",
        "timeline-title-5": "2022",
        "timeline-text-5": "Starting your career as a back-end software developer (Java - Python)",
        "timeline-title-6": "2025 - Future Goals",
        "timeline-text-6": "Focusing on innovation, following technology closely and sailing to future horizons with artificial intelligence.",
        "game-title": "Test Your Reflexes!",
        "game-desc": "Click as soon as the color changes!",
        "game-start": "Start Game",
        "game-wait": "Wait for the color change...",
        "game-click": "CLICK NOW!",
        "game-result": "Your reaction time: ",
        "game-restart": "Click Start to play again!",
        "game-best-score": "Best Score: "
    },
    "tr": {
        "title": "KiÅŸisel Web Sitesi",
        "nav-brand": "Merhabalar HoÅŸgeldiniz ðŸŒ",
        "nav-about": "HakkÄ±mda",
        "nav-game": "Refleks Oyunu",
        "nav-contact": "Ä°letiÅŸim",
        "lang-text": "Dil",
        "about-title": "HakkÄ±mda",
        "about-desc": "Teknoloji sadece kod yazmak deÄŸil, gerÃ§ek dÃ¼nya problemlerini Ã§Ã¶zmek ve daha iyi bir gelecek inÅŸa etmektir.",
        "about-text": "Ben bir problem Ã§Ã¶zÃ¼cÃ¼, bir geliÅŸtirici ve teknoloji meraklÄ±sÄ±yÄ±m. YazÄ±lÄ±mÄ±n sadece kod satÄ±rlarÄ±ndan ibaret olmadÄ±ÄŸÄ±na, dÃ¼nyayla nasÄ±l etkileÅŸim kurduÄŸumuzu ÅŸekillendirdiÄŸine inanÄ±yorum.",
        "resume-button": "Ã–zgeÃ§miÅŸimi Ä°ndir",
        "contact-title": "Bana UlaÅŸÄ±n",
        "contact-name": "AdÄ±nÄ±z:",
        "contact-email": "E-posta Adresiniz:",
        "contact-message": "MesajÄ±nÄ±z:",
        "contact-button": "GÃ¶nder",
        "contact-placeholder-name": "AdÄ±nÄ±zÄ± girin",
        "contact-placeholder-email": "E-posta adresinizi girin",
        "contact-placeholder-message": "MesajÄ±nÄ±zÄ± yazÄ±n...",
        "form-success": "Mesaj baÅŸarÄ±yla gÃ¶nderildi!",
        "form-error": "Mesaj gÃ¶nderilirken hata oluÅŸtu. LÃ¼tfen tekrar deneyin.",
        "timeline-title-1": "2018 - Programlamaya BaÅŸladÄ±m",
        "timeline-text-1": "Elektrik ve HaberleÅŸme MÃ¼hendisliÄŸi lisans eÄŸitimim ve C dili ile programlamayla ilk tanÄ±ÅŸmam",
        "timeline-title-2": "2019 - 2020",
        "timeline-text-2": "Lisans eÄŸitimimde yazÄ±lÄ±m konusunu Java ve Python ile daha ileri seviyeye taÅŸÄ±dÄ±m",
        "timeline-title-3": "2021",
        "timeline-text-3": "Raspberry Pi ve Python kullanarak gÃ¶mÃ¼lÃ¼ sistemlere giriÅŸ yaptÄ±m.",
        "timeline-title-4": "2021 - 2022",
        "timeline-text-4": "StajlarÄ±mda C ve Python kullanarak yazÄ±lÄ±m alanÄ±nda daha derinlemesine Ã§alÄ±ÅŸtÄ±m",
        "timeline-title-5": "2022",
        "timeline-text-5": "Back-end yazÄ±lÄ±m geliÅŸtirici olarak kariyerime baÅŸladÄ±m (Java - Python)",
        "timeline-title-6": "2025 - Gelecek Hedeflerim",
        "timeline-text-6": "Yeniliklere odaklanarak, teknolojiyi yakÄ±ndan takip ederek ve yapay zeka ile geleceÄŸe yelken aÃ§Ä±yorum.",
        "game-title": "Reflekslerinizi Test Edin!",
        "game-desc": "Renk deÄŸiÅŸtiÄŸinde hemen tÄ±klayÄ±n!",
        "game-start": "Oyunu BaÅŸlat",
        "game-wait": "Renk deÄŸiÅŸmesini bekleyin...",
        "game-click": "HEMEN TIKLAYIN!",
        "game-result": "Tepki sÃ¼reniz: ",
        "game-restart": "Tekrar oynamak iÃ§in BaÅŸlat'a tÄ±klayÄ±n!",
        "game-best-score": "En Ä°yi Skor: "
    }
};

// Change language function
function changeLanguage(lang) {
    document.querySelectorAll("[data-lang]").forEach(element => {
        let key = element.getAttribute("data-lang");
        if (translations[lang][key]) {
            element.innerText = translations[lang][key];
        }
    });

    // Update placeholders
    document.querySelectorAll("[data-placeholder]").forEach(element => {
        let key = element.getAttribute("data-placeholder");
        if (translations[lang][key]) {
            element.setAttribute("placeholder", translations[lang][key]);
        }
    });

    // Store selected language in localStorage
    localStorage.setItem("selectedLanguage", lang);
}

$(document).ready(function () {
    $("#contact-form").submit(function (event) {
        event.preventDefault();

        let name = $("#name").val().trim();
        let email = $("#email").val().trim();
        let message = $("#message").val().trim();
        let formMessage = $("#form-message");

        // Basic form validation
        if (!name || !email || !message) {
            formMessage.text("Please fill out all fields.").css("color", "red");
            return;
        }

        formMessage.text("Sending...").css("color", "blue");

        $.ajax({
            url: "https://formspree.io/f/xdkeorbd",
            method: "POST",
            contentType: "application/json",
            data: JSON.stringify({ name: name, email: email, message: message }),
            success: function (response) {
                formMessage.text("Message sent successfully!").css("color", "green");
                $("#contact-form")[0].reset(); // Formu temizle
            },
            error: function (xhr) {
                console.error("Form submission error:", xhr);
                formMessage.text("Error sending message. Please check your Form ID or try again later.").css("color", "red");
            }
        });
    });
});


// Function to change language dynamically
function changeLanguage(lang) {
    document.querySelectorAll("[data-lang]").forEach(element => {
        let key = element.getAttribute("data-lang");
        if (translations[lang][key]) {
            if (element.tagName === "SPAN") {
                element.innerText = translations[lang][key]; // Handle span inside buttons/links
            } else {
                element.innerText = translations[lang][key];
            }
        }
    });

    document.querySelectorAll("[data-placeholder]").forEach(element => {
        let key = element.getAttribute("data-placeholder");
        if (translations[lang][key]) {
            element.setAttribute("placeholder", translations[lang][key]);
        }
    });

    localStorage.setItem("selectedLanguage", lang);
}

// Function to toggle dark mode
document.getElementById("dark-mode-toggle").addEventListener("click", function() {
    document.body.classList.toggle("dark-mode");
    let mode = document.body.classList.contains("dark-mode") ? "dark" : "light";
    localStorage.setItem("theme", mode);
    this.innerText = mode === "dark" ? "â˜€ï¸" : "ðŸŒ™";
});

// Check user preference on page load
document.addEventListener("DOMContentLoaded", () => {
    if (localStorage.getItem("theme") === "dark") {
        document.body.classList.add("dark-mode");
        document.getElementById("dark-mode-toggle").innerText = "â˜€ï¸";
    } else {
        document.getElementById("dark-mode-toggle").innerText = "ðŸŒ™";
    }
});

// Function to trigger fade-in animation when elements are in viewport
function revealOnScroll() {
    let elements = document.querySelectorAll(".fade-in");
    elements.forEach(element => {
        if (element.getBoundingClientRect().top < window.innerHeight - 100) {
            element.classList.add("show");
        }
    });
}

document.addEventListener("DOMContentLoaded", revealOnScroll);
window.addEventListener("scroll", revealOnScroll);

document.querySelectorAll(".timeline-item").forEach(item => {
    item.addEventListener("click", function () {
        document.querySelectorAll(".timeline-item").forEach(el => el.classList.remove("active"));

        this.classList.add("active");
    });
});


document.addEventListener("DOMContentLoaded", () => {
    let gameBox = document.getElementById("game-box");
    let gameText = document.getElementById("game-text");
    let startButton = document.getElementById("start-game");
    let reactionTimeDisplay = document.getElementById("reaction-time");
    let bestScoreDisplay = document.getElementById("best-score");

    let startTime, timeout, countdownInterval;
    let gameActive = false; // Oyunun baÅŸlatÄ±lÄ±p baÅŸlatÄ±lmadÄ±ÄŸÄ±nÄ± takip etmek iÃ§in

    // En iyi skoru localStorage'dan al
    let bestScore = localStorage.getItem("bestScore");
    if (bestScore) {
        bestScoreDisplay.innerText = `Best Score: ${bestScore} ms`;
    }

    // Oyunu BaÅŸlat
    startButton.addEventListener("click", function () {
        if (gameActive) return; // EÄŸer oyun zaten baÅŸladÄ±ysa tekrar baÅŸlamasÄ±n

        gameActive = true;
        gameBox.style.backgroundColor = "red"; // Kutu baÅŸlangÄ±Ã§ta kÄ±rmÄ±zÄ±ya dÃ¶nÃ¼yor
        gameText.innerText = "Starting in 3..."; // Ä°lk geri sayÄ±mÄ± gÃ¶steriyoruz
        reactionTimeDisplay.innerText = ""; // SonuÃ§larÄ± temizle

        let countdown = 3;
        countdownInterval = setInterval(() => {
            countdown--;
            if (countdown > 0) {
                gameText.innerText = `Starting in ${countdown}...`;
            } else {
                clearInterval(countdownInterval);
                gameText.innerText = "Wait for color change...";

                let randomDelay = Math.floor(Math.random() * 3000) + 2000; // 2-5 saniye rastgele bekleme sÃ¼resi

                timeout = setTimeout(() => {
                    gameBox.style.backgroundColor = "green";
                    gameText.innerText = "CLICK NOW!";
                    startTime = new Date().getTime();
                }, randomDelay);
            }
        }, 1000);
    });

    // Refleks SÃ¼resini Ã–lÃ§me ve En Ä°yi Skoru GÃ¼ncelleme
    gameBox.addEventListener("click", function () {
        if (gameBox.style.backgroundColor === "green") {
            let reactionTime = new Date().getTime() - startTime;
            reactionTimeDisplay.innerText = `Your reaction time: ${reactionTime} ms`;
            gameBox.style.backgroundColor = "red";
            gameText.innerText = "Click Start to play again!";
            gameActive = false; // Oyun tamamlandÄ±

            // En iyi skoru gÃ¼ncelle
            if (!bestScore || reactionTime < bestScore) {
                bestScore = reactionTime;
                localStorage.setItem("bestScore", bestScore);
                bestScoreDisplay.innerText = `Best Score: ${bestScore} ms`;
            }
        }
    });
});